<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeRTOSä»å…¥é—¨åˆ°å®æˆ˜ - ä»»åŠ¡å®æˆ˜ï¼šåˆ›å»ºå¤šä¸ªä»»åŠ¡</title>
    <style>
        :root {
            --tech-blue: #4A90E2;
            --vital-orange: #FF8C42;
            --fresh-green: #6BCF7F;
            --light-gray: #f5f7fa;
            --dark-gray: #2c3e50;
            --white: #ffffff;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        body {
            background: linear-gradient(135deg, var(--light-gray) 0%, #e3f2fd 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            padding-bottom: 60px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(to right, var(--tech-blue), #2A5CA7);
            color: white;
            padding: 2.5rem 1rem;
            border-radius: 0 0 20px 20px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(42, 92, 167, 0.2);
            margin-bottom: 2.5rem;
        }
        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            font-weight: 300;
        }
        .chapter-card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border-left: 6px solid var(--vital-orange);
            transition: transform 0.3s ease;
        }
        .chapter-card:hover {
            transform: translateY(-5px);
        }
        h2 {
            color: var(--tech-blue);
            border-bottom: 2px dashed var(--fresh-green);
            padding-bottom: 0.7rem;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        h3 {
            color: var(--vital-orange);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.4rem;
        }
        p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        ul, ol {
            margin-left: 1.8rem;
            margin-bottom: 1.5rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        .highlight {
            background-color: rgba(107, 207, 127, 0.15);
            padding: 1.2rem;
            border-radius: 10px;
            border-left: 4px solid var(--fresh-green);
            margin: 1.5rem 0;
        }
        .code-block {
            background-color: #2d3a4b;
            color: #e6e6e6;
            padding: 1.5rem;
            border-radius: 10px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
            border: 1px solid #3a4a5f;
        }
        .architecture-svg {
            width: 100%;
            height: auto;
            background: #f9f9f9;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            border: 1px solid #ddd;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border-radius: 10px;
            overflow: hidden;
        }
        th {
            background-color: var(--tech-blue);
            color: white;
            padding: 1rem;
            text-align: left;
        }
        td {
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }
        tr:nth-child(even) {
            background-color: #f8fafc;
        }
        tr:hover {
            background-color: rgba(74, 144, 226, 0.08);
        }
        .task-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin: 2rem 0;
        }
        .task-box {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            width: 280px;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            border-top: 5px solid var(--vital-orange);
        }
        .task-box.green {
            border-top-color: var(--fresh-green);
        }
        .task-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        footer {
            text-align: center;
            margin-top: 4rem;
            padding: 2rem;
            color: var(--dark-gray);
            font-size: 1.1rem;
            font-weight: bold;
            border-top: 2px solid var(--tech-blue);
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
        }
        .keyword {
            color: #e06c75;
            font-weight: bold;
        }
        .function {
            color: #61afef;
        }
        .comment {
            color: #7f848e;
        }
        .macro {
            color: #c678dd;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>FreeRTOSä»å…¥é—¨åˆ°å®æˆ˜</h1>
            <p class="subtitle">ç¬¬äº”ç« ï¼šä»»åŠ¡å®æˆ˜ - åˆ›å»ºå¤šä¸ªä»»åŠ¡ï¼Œè§‚å¯Ÿå¹¶å‘æ‰§è¡Œ</p>
        </div>
    </header>

    <div class="container">
        <section class="chapter-card">
            <h2>5. ä»»åŠ¡å®æˆ˜ï¼šåˆ›å»ºå¤šä¸ªä»»åŠ¡</h2>
            <p>æœ¬ç« æˆ‘ä»¬å°†åŠ¨æ‰‹åˆ›å»ºä¸¤ä¸ªä»¥ä¸Šçš„ç®€å•ä»»åŠ¡ï¼ˆä¾‹å¦‚LEDé—ªçƒä»»åŠ¡å’Œä¸²å£æ‰“å°ä»»åŠ¡ï¼‰ï¼Œåœ¨å¼€å‘æ¿ä¸Šè§‚å¯Ÿå®ƒä»¬å¹¶å‘æ‰§è¡Œçš„ç°è±¡ï¼Œå¹¶æ·±å…¥ç†è§£FreeRTOSä»»åŠ¡å‡½æ•°çš„åŸºæœ¬ç»“æ„ã€åˆ›å»ºæ–¹æ³•ä»¥åŠè°ƒåº¦å™¨çš„è¡Œä¸ºã€‚</p>

            <div class="highlight">
                <strong>å­¦ä¹ ç›®æ ‡ï¼š</strong>
                <ul>
                    <li>æŒæ¡ä½¿ç”¨ <span class="keyword">xTaskCreate</span> å‡½æ•°åˆ›å»ºä»»åŠ¡çš„æ–¹æ³•ã€‚</li>
                    <li>ç†è§£ä»»åŠ¡å‡½æ•°æ— é™å¾ªç¯çš„åŸºæœ¬ç»“æ„ã€‚</li>
                    <li>é€šè¿‡ç›´è§‚ç°è±¡ï¼ˆLEDç¯ã€ä¸²å£è¾“å‡ºï¼‰ç†è§£å¤šä»»åŠ¡çš„â€œå¹¶å‘â€æ‰§è¡Œã€‚</li>
                    <li>äº†è§£ä»»åŠ¡ä¼˜å…ˆçº§å¯¹æ‰§è¡Œé¡ºåºçš„å½±å“ã€‚</li>
                </ul>
            </div>
        </section>

        <section class="chapter-card">
            <h2>5.1 ä»»åŠ¡å‡½æ•°çš„åŸºæœ¬ç»“æ„</h2>
            <p>åœ¨FreeRTOSä¸­ï¼Œä¸€ä¸ªä»»åŠ¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ°¸ä¸è¿”å›çš„Cå‡½æ•°ã€‚å®ƒé€šå¸¸åŒ…å«ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­æ‰§è¡Œç‰¹å®šåŠŸèƒ½ï¼Œå¹¶é€‚æ—¶ä½¿ç”¨FreeRTOSæä¾›çš„APIè¿›è¡Œå»¶æ—¶æˆ–ç­‰å¾…äº‹ä»¶ï¼Œä»¥è®©å‡ºCPUç»™å…¶ä»–ä»»åŠ¡ã€‚</p>

            <div class="code-block">
<pre><span class="comment">// FreeRTOSä»»åŠ¡å‡½æ•°çš„ç»å…¸æ¨¡æ¿</span>
<span class="keyword">void</span> <span class="function">vATaskFunction</span>( <span class="keyword">void</span> *pvParameters )
{
    <span class="comment">// å¯é€‰çš„åˆå§‹åŒ–ä»£ç ï¼Œåªæ‰§è¡Œä¸€æ¬¡</span>
    <span class="keyword">for</span>( ;; ) <span class="comment">// æ— é™å¾ªç¯ï¼Œä»»åŠ¡çš„æ ¸å¿ƒ</span>
    {
        <span class="comment">//--- ä»»åŠ¡çš„åŠŸèƒ½ä»£ç æ”¾åœ¨è¿™é‡Œ ---</span>
        <span class="comment">// ä¾‹å¦‚ï¼šç¿»è½¬LEDã€è¯»å–ä¼ æ„Ÿå™¨ã€å‘é€æ•°æ®ç­‰</span>

        <span class="comment">// å¿…é¡»åŒ…å«ä¸€ä¸ªèƒ½è®©å‡ºCPUæ§åˆ¶æƒçš„å‡½æ•°</span>
        <span class="comment">// ä¾‹å¦‚ï¼šå»¶æ—¶ã€ç­‰å¾…ä¿¡å·é‡ã€ç­‰å¾…é˜Ÿåˆ—æ¶ˆæ¯ç­‰</span>
        <span class="function">vTaskDelay</span>( <span class="macro">pdMS_TO_TICKS</span>( 1000 ) ); <span class="comment">// å»¶æ—¶1000æ¯«ç§’</span>
    }
    <span class="comment">// ä»»åŠ¡ç†è®ºä¸Šä¸åº”è¿”å›ï¼Œå¦‚æœè¿”å›ï¼Œå¿…é¡»è°ƒç”¨vTaskDelete(NULL);</span>
    <span class="comment">// vTaskDelete( NULL );</span>
}</pre>
            </div>

            <h3>å…³é”®ç‚¹è§£æï¼š</h3>
            <ul>
                <li><strong>å‚æ•° pvParameters</strong>ï¼šåˆ›å»ºä»»åŠ¡æ—¶ä¼ å…¥çš„æŒ‡é’ˆï¼Œå¯ç”¨äºå‘ä»»åŠ¡ä¼ é€’åˆå§‹åŒ–æ•°æ®ã€‚</li>
                <li><strong>æ— é™å¾ªç¯ for(;;)</strong>ï¼šä»»åŠ¡çš„ä¸»ä½“ï¼Œç¡®ä¿ä»»åŠ¡æŒç»­è¿è¡Œã€‚</li>
                <li><strong>é˜»å¡è°ƒç”¨</strong>ï¼šä»»åŠ¡å¿…é¡»è°ƒç”¨å¦‚ <span class="function">vTaskDelay()</span>ã€<span class="function">xQueueReceive()</span> ç­‰èƒ½è®©å‡ºCPUçš„å‡½æ•°ï¼Œå¦åˆ™ä¼šç‹¬å CPUï¼Œå¯¼è‡´å…¶ä»–ä½ä¼˜å…ˆçº§ä»»åŠ¡æ— æ³•è¿è¡Œã€‚</li>
            </ul>
        </section>

        <section class="chapter-card">
            <h2>5.2 å®æˆ˜ï¼šåˆ›å»ºLEDé—ªçƒä¸ä¸²å£æ‰“å°ä»»åŠ¡</h2>
            <p>æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼š<strong>Task_LED</strong> å’Œ <strong>Task_Print</strong>ã€‚å®ƒä»¬ä»¥ä¸åŒçš„é¢‘ç‡è¿è¡Œï¼Œé€šè¿‡ç‰©ç†ç°è±¡ç›´è§‚å±•ç¤ºå¹¶å‘ã€‚</p>

            <div class="task-visual">
                <div class="task-box">
                    <div class="task-icon">ğŸ’¡</div>
                    <h3>ä»»åŠ¡ä¸€ï¼šLEDé—ªçƒ</h3>
                    <p><strong>åŠŸèƒ½ï¼š</strong> æ¯500msç¿»è½¬ä¸€æ¬¡LEDçŠ¶æ€ã€‚</p>
                    <p><strong>ç°è±¡ï¼š</strong> LEDä»¥1Hzé¢‘ç‡é—ªçƒã€‚</p>
                    <p><strong>ä¼˜å…ˆçº§ï¼š</strong> 1 (è¾ƒä½)</p>
                </div>
                <div class="task-box green">
                    <div class="task-icon">ğŸ“Ÿ</div>
                    <h3>ä»»åŠ¡äºŒï¼šä¸²å£æ‰“å°</h3>
                    <p><strong>åŠŸèƒ½ï¼š</strong> æ¯1000msé€šè¿‡ä¸²å£å‘é€ä¸€æ¬¡è®¡æ•°ä¿¡æ¯ã€‚</p>
                    <p><strong>ç°è±¡ï¼š</strong> ä¸²å£è°ƒè¯•åŠ©æ‰‹æ¯ç§’æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ã€‚</p>
                    <p><strong>ä¼˜å…ˆçº§ï¼š</strong> 1 (ç›¸åŒ)</p>
                </div>
            </div>

            <h3>å®Œæ•´ç¤ºä¾‹ä»£ç  (åŸºäºSTM32 HALåº“ç¤ºä¾‹)</h3>
            <div class="code-block">
<pre><span class="comment">/* Includes ------------------------------------------------------------------*/</span>
<span class="macro">#include</span> <span class="string">"main.h"</span>
<span class="macro">#include</span> <span class="string">"FreeRTOS.h"</span>
<span class="macro">#include</span> <span class="string">"task.h"</span>
<span class="macro">#include</span> <span class="string">"usart.h"</span>

<span class="comment">/* Private function prototypes -----------------------------------------------*/</span>
<span class="keyword">void</span> <span class="function">Task_LED</span>( <span class="keyword">void</span> *pvParameters );
<span class="keyword">void</span> <span class="function">Task_Print</span>( <span class="keyword">void</span> *pvParameters );

<span class="comment">/* å®šä¹‰ä»»åŠ¡å¥æŸ„ */</span>
<span class="keyword">TaskHandle_t</span> xTaskLEDHandle = <span class="macro">NULL</span>;
<span class="keyword">TaskHandle_t</span> xTaskPrintHandle = <span class="macro">NULL</span>;

<span class="comment">/* ä¸»å‡½æ•°åˆ›å»ºä»»åŠ¡å¹¶å¯åŠ¨è°ƒåº¦å™¨ */</span>
<span class="keyword">int</span> <span class="function">main</span>( <span class="keyword">void</span> )
{
    <span class="comment">// ç¡¬ä»¶åˆå§‹åŒ– (HAL_Init, ç³»ç»Ÿæ—¶é’Ÿé…ç½®, GPIO, USARTç­‰)</span>
    <span class="function">HAL_Init</span>();
    <span class="function">SystemClock_Config</span>();
    <span class="function">MX_GPIO_Init</span>();
    <span class="function">MX_USART2_UART_Init</span>();

    <span class="comment">// åˆ›å»ºLEDé—ªçƒä»»åŠ¡</span>
    <span class="function">xTaskCreate</span>(
        <span class="function">Task_LED</span>,          <span class="comment">// ä»»åŠ¡å‡½æ•°æŒ‡é’ˆ</span>
        <span class="string">"Task_LED"</span>,        <span class="comment">// ä»»åŠ¡åç§°ï¼ˆå­—ç¬¦ä¸²ï¼Œç”¨äºè°ƒè¯•ï¼‰</span>
        <span class="number">128</span>,               <span class="comment">// ä»»åŠ¡æ ˆæ·±åº¦ï¼ˆå­—ï¼‰</span>
        <span class="macro">NULL</span>,              <span class="comment">// ä¼ é€’ç»™ä»»åŠ¡çš„å‚æ•°</span>
        <span class="number">1</span>,                 <span class="comment">// ä»»åŠ¡ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</span>
        &amp;xTaskLEDHandle    <span class="comment">// ä»»åŠ¡å¥æŸ„æŒ‡é’ˆï¼Œå¯ç”¨äºç®¡ç†ä»»åŠ¡</span>
    );

    <span class="comment">// åˆ›å»ºä¸²å£æ‰“å°ä»»åŠ¡</span>
    <span class="function">xTaskCreate</span>(
        <span class="function">Task_Print</span>,
        <span class="string">"Task_Print"</span>,
        <span class="number">128</span>,
        <span class="macro">NULL</span>,
        <span class="number">1</span>,
        &amp;xTaskPrintHandle
    );

    <span class="comment">// å¯åŠ¨FreeRTOSè°ƒåº¦å™¨ï¼Œç¨‹åºå°†æ°¸ä¸è¿”å›</span>
    <span class="function">vTaskStartScheduler</span>();

    <span class="comment">// å¦‚æœè°ƒåº¦å™¨å¯åŠ¨å¤±è´¥ï¼Œä¼šæ‰§è¡Œåˆ°è¿™é‡Œ</span>
    <span class="keyword">while</span>( <span class="number">1</span> );
}

<span class="comment">/* LEDé—ªçƒä»»åŠ¡å®ç° */</span>
<span class="keyword">void</span> <span class="function">Task_LED</span>( <span class="keyword">void</span> *pvParameters )
{
    <span class="keyword">const</span> <span class="keyword">TickType_t</span> xDelay500ms = <span class="macro">pdMS_TO_TICKS</span>( <span class="number">500</span> );
    <span class="keyword">for</span>( ;; )
    {
        <span class="function">HAL_GPIO_TogglePin</span>( LED_GPIO_Port, LED_Pin ); <span class="comment">// ç¿»è½¬LED</span>
        <span class="function">vTaskDelay</span>( xDelay500ms ); <span class="comment">// é˜»å¡å»¶æ—¶500msï¼Œè®©å‡ºCPU</span>
    }
}

<span class="comment">/* ä¸²å£æ‰“å°ä»»åŠ¡å®ç° */</span>
<span class="keyword">void</span> <span class="function">Task_Print</span>( <span class="keyword">void</span> *pvParameters )
{
    <span class="keyword">uint32_t</span> ulCount = <span class="number">0</span>;
    <span class="keyword">char</span> cBuffer[<span class="number">50</span>];
    <span class="keyword">const</span> <span class="keyword">TickType_t</span> xDelay1000ms = <span class="macro">pdMS_TO_TICKS</span>( <span class="number">1000</span> );

    <span class="keyword">for</span>( ;; )
    {
        ulCount++;
        <span class="function">sprintf</span>( cBuffer, <span class="string">"FreeRTOS Running! Count: %lu\r\n"</span>, ulCount );
        <span class="function">HAL_UART_Transmit</span>( &amp;huart2, (<span class="keyword">uint8_t</span>*)cBuffer, <span class="function">strlen</span>(cBuffer), <span class="number">0xFFFF</span> );
        <span class="function">vTaskDelay</span>( xDelay1000ms ); <span class="comment">// é˜»å¡å»¶æ—¶1000ms</span>
    }
}</pre>
            </div>
        </section>

        <section class="chapter-card">
            <h2>5.3 ä»»åŠ¡å¹¶å‘æ‰§è¡ŒåŸç†ä¸ç°è±¡åˆ†æ</h2>
            <p>è™½ç„¶æˆ‘ä»¬åªæœ‰ä¸€ä¸ªCPUæ ¸å¿ƒï¼Œä½†FreeRTOSè°ƒåº¦å™¨é€šè¿‡<strong>æ—¶é—´ç‰‡è½®è½¬</strong>æˆ–<strong>åŸºäºä¼˜å…ˆçº§çš„æŠ¢å </strong>ï¼Œä½¿å¾—å¤šä¸ªä»»åŠ¡çœ‹èµ·æ¥æ˜¯â€œåŒæ—¶â€è¿è¡Œçš„ã€‚</p>

            <svg class="architecture-svg" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="300" fill="#f9f9f9" stroke="#ddd" stroke-width="1" rx="10"/>
                <text x="400" y="40" text-anchor="middle" font-size="18" font-weight="bold" fill="#2c3e50">FreeRTOSä»»åŠ¡è°ƒåº¦æ—¶é—´çº¿ç¤ºæ„å›¾</text>
                <line x1="50" y1="100" x2="750" y2="100" stroke="#4A90E2" stroke-width="2"/>
                <line x1="50" y1="200" x2="750" y2="200" stroke="#FF8C42" stroke-width="2"/>
                <text x="30" y="110" font-size="14" fill="#2c3e50">Task_LED</text>
                <text x="30" y="210" font-size="14" fill="#2c3e50">Task_Print</text>
                <g id="ticks">
                    <line x1="100" y1="90" x2="100" y2="110" stroke="#666" stroke-width="1"/>
                    <line x1="250" y1="90" x2="250" y2="110" stroke="#666" stroke-width="1"/>
                    <line x1="400" y1="90" x2="400" y2="110" stroke="#666" stroke-width="1"/>
                    <line x1="550" y1="90" x2="550" y2="110" stroke="#666" stroke-width="1"/>
                    <line x1="700" y1="90" x2="700" y2="110" stroke="#666" stroke-width="1"/>
                    <line x1="100" y1="190" x2="100" y2="210" stroke="#666" stroke-width="1"/>
                    <line x1="400" y1="190" x2="400" y2="210" stroke="#666" stroke-width="1"/>
                    <line x1="700" y1="190" x2="700" y2="210" stroke="#666" stroke-width="1"/>
                </g>
                <rect x="80" y="80" width="40" height="40" fill="#6BCF7F" opacity="0.8" rx="5"/>
                <text x="100" y="105" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œ</text>
                <rect x="230" y="80" width="40" height="40" fill="#6BCF7F" opacity="0.8" rx="5"/>
                <text x="250" y="105" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œ</text>
                <rect x="380" y="80" width="40" height="40" fill="#6BCF7F" opacity="0.8" rx="5"/>
                <text x="400" y="105" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œ</text>
                <rect x="530" y="80" width="40" height="40" fill="#6BCF7F" opacity="0.8" rx="5"/>
                <text x="550" y="105" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œ</text>
                <rect x="680" y="80" width="40" height="40" fill="#6BCF7F" opacity="0.8" rx="5"/>
                <text x="700" y="105" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œ</text>
                <rect x="80" y="180" width="240" height="40" fill="#FF8C42" opacity="0.8" rx="5"/>
                <text x="200" y="205" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œï¼ˆæ‰“å°ï¼‰</text>
                <rect x="380" y="180" width="240" height="40" fill="#FF8C42" opacity="0.8" rx="5"/>
                <text x="500" y="205" text-anchor="middle" font-size="12" fill="white">æ‰§è¡Œï¼ˆæ‰“å°ï¼‰</text>
                <rect x="680" y="180" width="40" height="40" fill="#FF8C42" opacity="0.8" rx="5"/>
                <text x="700" y="205" text-anchor="middle" font-size="12" fill="white">...</text>
                <text x="100" y="270" text-anchor="middle" font-size="12" fill="#666">0ms</text>
                <text x="250" y="270" text-anchor="middle" font-size="12" fill="#666">500ms</text>
                <text x="400" y="270" text-anchor="middle" font-size="12" fill="#666">1000ms</text>
                <text x="550" y="270" text-anchor="middle" font-size="12" fill="#666">1500ms</text>
                <text x="700" y="270" text-anchor="middle" font-size="12" fill="#666">2000ms</text>
            </svg>

            <h3>ä½ å°†è§‚å¯Ÿåˆ°çš„ç°è±¡ï¼š</h3>
            <table>
                <thead>
                    <tr>
                        <th>æ—¶é—´ç‚¹</th>
                        <th>LEDä»»åŠ¡ (Task_LED)</th>
                        <th>ä¸²å£ä»»åŠ¡ (Task_Print)</th>
                        <th>ç”¨æˆ·æ„ŸçŸ¥</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0ms</td>
                        <td>LEDç‚¹äº®ï¼ˆæˆ–ç†„ç­ï¼‰</td>
                        <td>å¼€å§‹æ‰§è¡Œï¼Œä¸²å£å‘é€"Count: 1"</td>
                        <td>LEDçŠ¶æ€æ”¹å˜ï¼Œä¸²å£æ”¶åˆ°ç¬¬ä¸€æ¡æ¶ˆæ¯</td>
                    </tr>
                    <tr>
                        <td>500ms</td>
                        <td>LEDçŠ¶æ€ç¿»è½¬ï¼Œè¿›å…¥å»¶æ—¶</td>
                        <td>ä»åœ¨å»¶æ—¶ä¸­ï¼ˆç­‰å¾…1000msï¼‰</td>
                        <td>LEDå†æ¬¡æ”¹å˜ï¼Œä¸²å£æ— è¾“å‡º</td>
                    </tr>
                    <tr>
                        <td>1000ms</td>
                        <td>LEDçŠ¶æ€ç¿»è½¬ï¼Œè¿›å…¥å»¶æ—¶</td>
                        <td>å»¶æ—¶ç»“æŸï¼Œå‘é€"Count: 2"</td>
                        <td>LEDæ”¹å˜ï¼Œä¸²å£æ”¶åˆ°ç¬¬äºŒæ¡æ¶ˆæ¯</td>
                    </tr>
                    <tr>
                        <td>1500ms</td>
                        <td>LEDçŠ¶æ€ç¿»è½¬</td>
                        <td>å»¶æ—¶ä¸­</td>
                        <td>LEDæ”¹å˜ï¼Œä¸²å£æ— è¾“å‡º</td>
                    </tr>
                    <tr>
                        <td>2000ms</td>
                        <td>LEDçŠ¶æ€ç¿»è½¬</td>
                        <td>å‘é€"Count: 3"</td>
                        <td>LEDæ”¹å˜ï¼Œä¸²å£æ”¶åˆ°ç¬¬ä¸‰æ¡æ¶ˆæ¯</td>
                    </tr>
                </tbody>
            </table>
            <p><strong>ç»“è®ºï¼š</strong> ä¸¤ä¸ªä»»åŠ¡ç‹¬ç«‹ã€å‘¨æœŸæ€§åœ°è¿è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚ç”±äºå®ƒä»¬éƒ½è°ƒç”¨äº† <span class="function">vTaskDelay()</span>ï¼Œä¼šä¸»åŠ¨è®©å‡ºCPUï¼Œå› æ­¤å³ä½¿ä¼˜å…ˆçº§ç›¸åŒï¼Œä¹Ÿèƒ½å…¬å¹³åœ°è·å¾—æ‰§è¡Œæ—¶é—´ã€‚</p>
        </section>

        <section class="chapter-card">
            <h2>5.4 å…³é”®APIä¸æ¦‚å¿µæ€»ç»“</h2>
            <h3>1. ä»»åŠ¡åˆ›å»ºå‡½æ•° xTaskCreate() å‚æ•°è¯¦è§£</h3>
            <table>
                <thead>
                    <tr>
                        <th>å‚æ•°</th>
                        <th>å«ä¹‰</th>
                        <th>æ³¨æ„äº‹é¡¹</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>pvTaskCode</td>
                        <td>æŒ‡å‘ä»»åŠ¡å‡½æ•°çš„æŒ‡é’ˆ</td>
                        <td>å‡½æ•°å¿…é¡»ä¸º <span class="keyword">void</span> è¿”å›ï¼Œä¸”å¸¦ä¸€ä¸ª <span class="keyword">void*</span> å‚æ•°</td>
                    </tr>
                    <tr>
                        <td>pcName</td>
                        <td>ä»»åŠ¡æè¿°æ€§åç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰</td>
                        <td>ç”¨äºè°ƒè¯•ï¼Œé•¿åº¦ç”± configMAX_TASK_NAME_LEN å®šä¹‰</td>
                    </tr>
                    <tr>
                        <td>usStackDepth</td>
                        <td>ä»»åŠ¡æ ˆå¤§å°ï¼ˆä»¥å­—ä¸ºå•ä½ï¼‰</td>
                        <td>éœ€æ ¹æ®ä»»åŠ¡å¤æ‚åº¦åˆ†é…ï¼Œé¿å…æº¢å‡º</td>
                    </tr>
                    <tr>
                        <td>pvParameters</td>
                        <td>ä¼ é€’ç»™ä»»åŠ¡çš„å‚æ•°æŒ‡é’ˆ</td>
                        <td>å¯ä¼ é€’ç»“æ„ä½“ç­‰å¤æ‚æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>uxPriority</td>
                        <td>ä»»åŠ¡ä¼˜å…ˆçº§ (0 ~ configMAX_PRIORITIES-1)</td>
                        <td>æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ0ä¸ºç©ºé—²ä»»åŠ¡ä¼˜å…ˆçº§</td>
                    </tr>
                    <tr>
                        <td>pxCreatedTask</td>
                        <td>ä»»åŠ¡å¥æŸ„æŒ‡é’ˆï¼Œç”¨äºå¼•ç”¨ä»»åŠ¡</td>
                        <td>å¯ç”¨äºåˆ é™¤ã€æŒ‚èµ·ã€æ¢å¤ä»»åŠ¡</td>
                    </tr>
                </tbody>
            </table>

            <h3>2. æ ¸å¿ƒæ¦‚å¿µ</h3>
            <ul>
                <li><strong>å¹¶å‘ä¸å¹¶è¡Œï¼š</strong> åœ¨å•æ ¸MCUä¸Šæ˜¯â€œå¹¶å‘â€ï¼ˆåˆ†æ—¶å¤ç”¨ï¼‰ï¼Œçœ‹èµ·æ¥åŒæ—¶æ‰§è¡Œï¼›å¤šæ ¸æ‰æ˜¯çœŸæ­£çš„â€œå¹¶è¡Œâ€ã€‚</li>
                <li><strong>ä»»åŠ¡çŠ¶æ€ï¼š</strong> è¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€ï¼ˆå¦‚è°ƒç”¨vTaskDelayæ—¶ï¼‰ã€æŒ‚èµ·æ€ã€‚</li>
                <li><strong>é˜»å¡ï¼ˆBlockingï¼‰ï¼š</strong> ä»»åŠ¡ç­‰å¾…äº‹ä»¶ï¼ˆæ—¶é—´ã€ä¿¡å·é‡ã€æ¶ˆæ¯ç­‰ï¼‰æ—¶ï¼Œè¿›å…¥é˜»å¡æ€ï¼Œè®©å‡ºCPUï¼Œæ˜¯RTOSé«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚</li>
                <li><strong>æ—¶é—´ç‰‡ï¼ˆTime Slicingï¼‰ï¼š</strong> åŒä¼˜å…ˆçº§ä»»åŠ¡ä¹‹é—´é€šè¿‡æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ï¼Œæ¯ä¸ªä»»åŠ¡æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ï¼ˆå¯ç”± configTICK_RATE_HZ æ¨ç®—ï¼‰ã€‚</li>
            </ul>
        </section>

        <section class="chapter-card">
            <h2>5.5 åŠ¨æ‰‹å®éªŒä¸æ€è€ƒé¢˜</h2>
            <div class="highlight">
                <strong>å®éªŒå»ºè®®ï¼š</strong>
                <ol>
                    <li>åœ¨çœŸå®å¼€å‘æ¿æˆ–ä»¿çœŸå™¨ï¼ˆå¦‚Proteusã€STM32CubeIDEä»¿çœŸï¼‰ä¸Šè¿è¡Œä¸Šè¿°ä»£ç ã€‚</li>
                    <li>è§‚å¯ŸLEDçš„é—ªçƒé¢‘ç‡æ˜¯å¦ç¨³å®šä¸º1Hzï¼ˆäº®500msï¼Œç­500msï¼‰ã€‚</li>
                    <li>æ‰“å¼€ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼ˆå¦‚Puttyã€SecureCRTï¼‰ï¼Œè®¾ç½®æ­£ç¡®çš„æ³¢ç‰¹ç‡ï¼Œè§‚å¯Ÿæ˜¯å¦æ¯ç§’æ”¶åˆ°ä¸€æ¡è®¡æ•°ä¿¡æ¯ã€‚</li>
                    <li>å°è¯•ä¿®æ”¹ä¸¤ä¸ªä»»åŠ¡çš„å»¶æ—¶æ—¶é—´ï¼Œè§‚å¯Ÿç°è±¡å˜åŒ–ã€‚</li>
                </ol>
            </div>

            <h3>æ€è€ƒé¢˜ï¼š</h3>
            <ul>
                <li>å¦‚æœå°†ä¸¤ä¸ªä»»åŠ¡çš„ä¼˜å…ˆçº§è®¾ç½®ä¸ºä¸åŒï¼ˆä¾‹å¦‚LEDä»»åŠ¡ä¸º2ï¼Œæ‰“å°ä»»åŠ¡ä¸º1ï¼‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
                <li>å¦‚æœä»»åŠ¡å‡½æ•°ä¸­å»æ‰ <span class="function">vTaskDelay()</span>ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿç³»ç»Ÿè¿˜ä¼šæ­£å¸¸è¿è¡Œå—ï¼Ÿ</li>
                <li>ä»»åŠ¡æ ˆå¤§å°ï¼ˆusStackDepthï¼‰å¦‚æœè®¾ç½®å¾—è¿‡å°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è¯Šæ–­ï¼Ÿ</li>
                <li>å¦‚ä½•å‘ä»»åŠ¡ä¼ é€’å‚æ•°ï¼Ÿè¯·å°è¯•ä¿®æ”¹ä»£ç ï¼Œè®©ä¸²å£æ‰“å°ä»»åŠ¡èƒ½è¾“å‡ºè‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚</li>
            </ul>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>è“æµ·èµ„æ–™æ˜é‡‘è¥ Â© 2023 - ã€ŠFreeRTOSä»å…¥é—¨åˆ°å®æˆ˜ã€‹è¯¾ç¨‹å‡ºå“</p>
            <p>çŸ¥è¡Œåˆä¸€ï¼Œåœ¨å®è·µä¸­æŒæ¡åµŒå…¥å¼å®æ—¶æ“ä½œç³»ç»Ÿçš„ç²¾é«“ï¼</p>
        </div>
    </footer>
</body>
</html>